<!DOCTYPE html>
<html>
    <head>
        <title>The World Map</title>
        <link rel="stylesheet" href="./css/styles.css">
        <link rel="stylesheet" href="./css/load_animation.css">
        <link rel="stylesheet" href="./css/timeout_animation.css">
        <link rel="stylesheet" href="./css/load_animation-localhost.css">
        <link rel="stylesheet" href="./css/auto-complete.css">
        <link rel="stylesheet" href="./css/input_label.css">
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
<body>

<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

<div class="container">    
    <div class="back_head"></div>

    <div class='content'>

        <div class = "head">
            <div onclick="set_preload()" class='pre_load'>True</div>
            <div class="form__group field">
                <input type="input" class="form__field" placeholder="Countrie" name="name" id='where' required  autocomplete="off"/>
                <label for="name" class="form__label">Where is my mind...</label>
            </div>
            <div class="button" onclick="search()"></div>
        </div>

        <div id='selected' class="box" onclick="open_Website()">
            <div id="001" class="containt_box">
            </div>
        </div>

        <div class="list_countries">
        </div>

    </div>

</div>


<script src="https://code.jquery.com/jquery-1.9.1.js"></script>
<script src="/scripts/variables.js"></script>
<script src="/scripts/load_animation.js"></script>
<script src="/scripts/load_timeout.js"></script>
<script src="/scripts/set_get_countries.js"></script>
<script src="/scripts/autocomplete.js"></script>
<script src="/scripts/init.js"></script>
<script src="/scripts/pre_load.js"></script>
<script src="/scripts/load_animation-localhost.js"></script>
<script src="/scripts/animation_box.js"></script>



<script>   
    
    var clicked = false // Controle de janela
    var local_countrie = null; // Localização atual do IP
    var selected_country = "" // País selecionado
    var data_countries; // Armazena os países retornados pela Api.
    var unload = true; // Deverá ser false, quando a api retornar os resultados.

    // Abre o wikipedia com o país selecionado
    function open_Website(){
        if(unload) return

        window.open("https://pt.wikipedia.org/wiki/"+selected_country)
    }

    // Inicia a animação para mostragem do país selecionado
    function open_Box(country){
        if(unload) return      

        if(!clicked){
            add_animationBox()
            clicked = true
        }

        if(pre_load) set_countrieSelect(country,false)
        else get_countrieSelect(country)

    }

    // Inicia a animação para a mostragem do país buscado
    function search(){
        if(unload) return


        if(!clicked){
            
            var element = document.getElementById("where").value;
            if(element=="") element=local_countrie 
            add_animationBox()
            clicked = true
            if(pre_load) set_countrieSelect(element,false)
            else get_countrieSelect(element)


        }else {
            remove_animationBox()
            clicked = false
        }
    }
   
</script>



</body>
</html>
